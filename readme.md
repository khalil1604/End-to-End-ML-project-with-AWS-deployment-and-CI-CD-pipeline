Purpose of components in the src Directory
modular structure
scalability
reusabulity
easier debugging


he said that there is a model pusher to push the model i think into the cloud

the are two pipelines, one training and prediction pipeline



what i did for the cicd:
create docker here in vs code : student-performance
set up the workflow.yml
then in aws i created iam user
then i created the ecr public or private repos in aws then ec2 instance
i followed the linux commands then github runnable commands where i put them in the cli


# CI/CD Pipeline with GitHub Actions and AWS

This repository is configured with a CI/CD pipeline using GitHub Actions to build, push, and deploy a Dockerized application to AWS Elastic Container Registry (ECR) and run it on an Amazon EC2 instance (Ubuntu). The process involves integrating various AWS services and GitHub components for a seamless deployment workflow.

## Key Components and Setup

### 1. AWS ECR (Elastic Container Registry)
   - **Purpose**: AWS ECR serves as a secure, scalable repository to store Docker images for this project.
   - **Configuration**: We created a dedicated ECR repository to hold the Docker images generated by our workflow. The repository URI is referenced in GitHub Actions for pushing new image builds.
   - **Image Tagging**: Each Docker image is tagged (e.g., `latest`) and pushed to ECR as part of the `build-and-push-ecr-image` job in our GitHub Actions workflow.

### 2. AWS EC2 (Ubuntu Setup)
   - **Instance**: An Ubuntu EC2 instance acts as our deployment server and self-hosted runner. This setup allows the server to pull Docker images from ECR and run the containerized application.
   - **Role in CI/CD**: EC2 is registered as a self-hosted GitHub runner, making it possible to run deployment tasks directly on the instance.
   - **Docker Configuration**: Docker is installed on the EC2 instance, enabling it to pull and run images from ECR as part of the deployment step in the workflow.

### 3. IAM Configuration (AWS Permissions)
   - **IAM User**: An IAM user with programmatic access is configured with permissions to push images to ECR and to deploy from EC2. 
   - **Policies**: The `AmazonEC2ContainerRegistryFullAccess` policy allows full access to ECR, enabling the workflow to log in, build, and push images.
   - **Secrets in GitHub**: The IAM user's `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` are securely stored as GitHub Secrets to be used within GitHub Actions.

### 4. GitHub Actions Workflow (`workflow.yml`)

The `.github/workflows/workflow.yml` file defines the pipeline. Below is an overview of its main jobs:

   - **Integration (CI)**: Lints and tests the code (basic placeholder commands used). Ensures the application code is sound before deploying.
   - **Build and Push to ECR**:
     - **Builds** the Docker image from the latest code.
     - **Logs in** to ECR and pushes the tagged image (`latest`) to the specified ECR repository.
     - This step is configured to require IAM credentials and ECR repository information stored in GitHub Secrets.
   - **Continuous Deployment (CD)**:
     - **Runs on Self-Hosted EC2 Runner**: This job uses the EC2 instance as a self-hosted runner to pull and run the Docker image directly on the instance.
     - **Deploys Image**: Pulls the latest Docker image from ECR and runs it on the EC2 server using Docker, exposing it on the desired port.
     - **Environment Variables**: AWS credentials are passed as environment variables to the container for access to other AWS services if needed.

### 5. GitHub Self-Hosted Runner (EC2 Instance)
   - **Setup**: The EC2 instance was registered as a self-hosted runner on GitHub, allowing the deployment job to execute directly on this instance.
   - **Role in Deployment**: This enables the workflow to perform actions that require direct access to the EC2 instance, such as Docker container management (pulling, running, and stopping containers).
   - **Maintenance**: As a self-hosted runner, the EC2 instance requires monitoring and maintenance to ensure it stays registered with GitHub Actions and has the necessary dependencies (e.g., Docker).

### 6. GitHub Secrets Configuration
   - **Stored Secrets**: Essential information required by the workflow is stored securely in GitHub Secrets:
     - `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`: IAM user credentials for access to AWS services.
     - `AWS_REGION`: Specifies the AWS region for ECR and EC2.
     - `ECR_REPOSITORY_NAME`: Name of the ECR repository to push the Docker images.
     - `AWS_ECR_LOGIN_URI`: ECR login URI for the specific account and region (e.g., `123456789.dkr.ecr.us-east-1.amazonaws.com`).
   - **Purpose**: These secrets allow the workflow to securely interact with AWS without hardcoding sensitive information directly in the workflow file.

### Additional Notes
- **Workflow Flexibility**: The current setup uses placeholder commands for linting and testing in the CI stage; these can be customized to actual lint and test commands as per the application requirements.
- **EC2 Maintenance**: As a self-hosted runner, the EC2 instance needs to stay active and properly configured to continuously serve as a runner.
- **Security**: Ensure that only necessary permissions are granted to IAM roles and secrets are periodically rotated to maintain security.

## Summary

This CI/CD pipeline automates the process of integrating, building, pushing, and deploying a Dockerized application, allowing for a scalable and repeatable deployment to AWS. By using a combination of GitHub Actions, AWS services (ECR, EC2), IAM roles, and a self-hosted runner, we achieve a continuous workflow from code commit to deployment.

